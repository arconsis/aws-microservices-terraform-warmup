const database = require('./db');
const dbInterfaces = require('./interfaces');
const {
  validateConfig,
} = require('./common/utils');

module.exports = {
  create(config) {
    try {
      validateConfig(config);
    } catch (error) {
      throw error;
    }
    const db = database(config);
    const interfaces = dbInterfaces(db);
    return Object.assign(
      {},
      db,
      {
        interfaces,
      },
    );
  },
};
